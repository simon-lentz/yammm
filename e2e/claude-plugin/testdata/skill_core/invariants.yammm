schema "skill_core_invariants"

// Source: SKILL.md, "Invariants" and "Collection Invariants" sections

type Product {
    id UUID primary
    name String[1, 100] required
    price Float[0.0, _] required
    discount Float[0.0, 100.0]

    ! "name_not_blank" name != ""
    ! "discount_reasonable" discount == nil || discount <= 50.0
}

part type LineItem {
    quantity Integer[1, _] required
    unit_price Float[0.0, _] required
}

type Order {
    id String primary
    *-> ITEMS (many) LineItem

    ! "has_items" ITEMS -> Len > 0
    ! "all_positive_qty" ITEMS -> All |$item| { $item.quantity > 0 }
}
