schema "patterns_soft_delete"

// Source: patterns.md, "Soft Delete Pattern"

abstract type SoftDeletable {
    is_active Boolean required
    deactivated_at Timestamp
    deactivated_reason Enum["removed", "expired", "merged", "manual"]

    ! "deactivation_consistency" is_active || deactivated_at != nil
}

type Account extends SoftDeletable {
    id String primary
    name String[1, 100] required
}
