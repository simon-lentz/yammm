schema "list_patterns"

type EmailAddress = Pattern["^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"]

type ListArticle {
    id UUID primary
    title String[1, 200] required
    tags List<String[1, 50]>
    categories List<String[1, 100]>[1, 5] required
}

type Survey {
    id UUID primary
    title String[1, 200] required
    scores List<Integer[1, 10]>[1, _] required

    ! "has_scores" scores -> Len > 0
}

type ContactCard {
    id UUID primary
    name String[1, 100] required
    emails List<EmailAddress>[1, 5] required
}

type Config {
    id String primary
    allowed_hosts List<String[_, 253]> required

    ! "has_hosts" allowed_hosts -> Len > 0
    ! "no_empty_hosts" allowed_hosts -> All |$h| { $h -> Len > 0 }
    ! "max_hosts" allowed_hosts -> Len <= 50
}
